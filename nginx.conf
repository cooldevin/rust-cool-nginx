# Nginx 配置文件
# 详细配置说明请参考 nginx_detailed_features.md

[server]
# 服务器监听地址
listen_addr = "127.0.0.1:80"

# 后端服务器地址（反向代理模式）
# 留空表示静态文件服务模式
backend_addr = ""

# 静态文件根目录
static_root = "./public"

# 日志配置
access_log = "./logs/access.log"
error_log = "./logs/error.log"
log_level = "info"

# SSL/TLS 配置
ssl_cert_path = "./certs/server.crt"
ssl_key_path = "./certs/server.key"
ssl_enabled = false

[upstream]
# 上游服务器配置（负载均衡）
# 负载均衡算法: round_robin, weighted_round_robin, least_connections, ip_hash
load_balancing_algorithm = "round_robin"

# 上游服务器列表
[[upstream.servers]]
address = "127.0.0.1:8080"
weight = 1
max_fails = 3
fail_timeout = "10s"

[[upstream.servers]]
address = "127.0.0.1:8081"
weight = 1
max_fails = 3
fail_timeout = "10s"

[features]
# 基本 HTTP 服务
static_file_serving = true
reverse_proxy = true
fastcgi_support = false

# 高级 HTTP 服务
load_balancing = false
# 负载均衡算法: round_robin, weighted_round_robin, least_connections, ip_hash
cache_enabled = false
cache_path = "./cache"
cache_max_size = "100M"
cache_inactive = "60m"

gzip_compression = true
gzip_comp_level = 6
gzip_min_length = 1024
gzip_types = ["text/plain", "text/css", "application/json", "application/javascript", "text/xml", "application/xml"]

virtual_hosts = false

# 安全特性
access_control = true
# 允许访问的 IP 列表
allow_ips = ["127.0.0.1", "192.168.0.0/16"]
# 拒绝访问的 IP 列表
deny_ips = []

rate_limiting = true
# 每分钟最大请求数
max_requests_per_minute = 1000

ssl_tls = false

# 其他功能
websocket_support = true

# 性能优化
worker_processes = 4
worker_connections = 1024

# 监控配置
monitoring_enabled = true
stats_path = "/nginx_status"